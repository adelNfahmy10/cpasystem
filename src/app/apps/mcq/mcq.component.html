<section>
    <div class="head bg-[#173F6C] dark:bg-[#0E1726] text-white dark:text-[#8185A1] p-3">
        MCQs | F1 - M1 Balance Sheet, Income Statement, And Comprehensive Income
    </div>

    <div class="tools bg-white dark:bg-[#101430] dark:text-[#b4b7c6] p-3">
        <div class="grid grid-cols-3 gap-4">
            <div class="flex justify-start items-center gap-1">
                <i *ngIf="timerRunning" class="fa-solid fa-pause text-[20px] cursor-pointer me-4" (click)="toggleTimer()"></i>
                <i *ngIf="!timerRunning" class="fa-solid fa-play text-[20px] cursor-pointer me-4" (click)="toggleTimer()"></i>

                <span class="text-[30px] font-semibold me-2">{{minutes}}:{{seconds}}</span>
                <div class="mt-4 flex justify-center items-center gap-1">
                    <p class="text-[14px] font-semibold">QUESTION <br> TIME ELAPSED</p>
                    <i class="fa-solid fa-circle-info text-[20px] mt-[13px] hover:text-[#A22D5C] transition-all cursor-pointer"  ngxTippy="Average time per question should be less than 2 minutes." [tippyProps]="{trigger: 'mouseenter', placement:'bottom'}"></i>
                </div>
            </div>

            <div class="flex justify-center items-center gap-5">
                <div class="flex flex-col justify-between items-center gap-2 cursor-pointer transition-all hover:text-[#A22D5C]">
                    <i class="fa-solid fa-calculator text-[30px]" (click)="openExternalCalculator()"></i>
                    <span class="text-[22px]">Calc.</span>
                </div>
                <div class="flex flex-col justify-between items-center gap-2 cursor-pointer transition-all hover:text-[#A22D5C]">
                    <i class="fa-solid fa-list-ol text-[30px] cursor-pointer"></i>
                    <span class="text-[22px]">SpreadSheet</span>
                </div>
                <div class="flex flex-col justify-between items-center gap-2 cursor-pointer transition-all hover:text-[#A22D5C]">
                    <i class="fa-solid fa-question text-[30px] cursor-pointer"></i>
                    <span class="text-[22px]">Help</span>
                </div>
            </div>

            <div class="text-end">
                <button type="button" class="focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">END SESSION</button>
            </div>
        </div>
    </div>

    <div class="question-index py-3">
        <div class="flex flex-wrap justify-center items-center gap-3 mb-3">
          <span
            *ngFor="let i of questions; let index = index"
            (click)="selectQuestion(i.id)"
            [ngClass]="{'hover:text-[#A22D5C]': i.id !== selectedQuestionId, 'text-[#A22D5C]': i.id === selectedQuestionId, 'text-[28px]': i.id === selectedQuestionId}"
            class="text-[20px] font-semibold cursor-pointer"
          >
            {{ i.id }}
          </span>
        </div>

        <div class="bg-white dark:bg-transparent p-10 border border-l-2 border-white-light !border-l-primary">
            <div class="flex flex-wrap gap-8">
                <div class="flex gap-3">
                    <i class="fa-solid fa-play rotate-y-180 cursor-pointer" [ngClass]="{
                        'pointer-events-none' : selectedQuestionId == 1,
                        'text-[#aaa]' : selectedQuestionId == 1
                        }" (click)="selectQuestion(selectedQuestionId - 1)"
                    ></i>
                    <h1 class="font-bold text-[30px] text-[#A22D5C]">
                        {{selectedQuestionId}}<i class="fa-solid fa-bookmark text-[#aaa] text-[12px] relative top-[-10px]"></i>
                    </h1>
                    <i class="fa-solid fa-play cursor-pointer" [ngClass]="{
                        'pointer-events-none' : selectedQuestionId == this.questions.length,
                        'text-[#aaa]' : selectedQuestionId == this.questions.length,
                        }
                        " (click)="selectQuestion(selectedQuestionId + 1)">
                    </i>
                </div>
                <h2>{{ questions[selectedQuestionId - 1].msqID }}</h2>
            </div>
            <h5 class="my-5 text-lg font-semibold dark:text-white-light">
                {{ questions[selectedQuestionId - 1].question }}
            </h5>

            <div class="space-y-2">
                <div *ngFor="let option of questions[selectedQuestionId - 1].options">
                    <label class="inline-flex">
                    <input
                        type="radio"
                        name="default_radio"
                        [value]="option"
                        (change)="selectOption(option)"
                        [ngClass]="{'text-success': option.answer === true, 'text-danger': option.answer === false}"
                        class="form-radio"
                        [disabled]="selectedOption !== null"
                    />
                    <span [ngClass]="{
                        'bg-green-500 text-white': selectedOption === option && option.answer === true,
                        'bg-red-500 text-white': selectedOption === option && option.answer === false,
                    }">{{ option.option }}</span>
                    </label>
                    <div>
                    </div>
                </div>
            </div>

            <div *ngIf="selectedOption" class="mt-6 p-4 border rounded bg-gray-100 dark:bg-gray-800">
                <h6 class="font-semibold text-primary mb-2">Explanation:</h6>
                <p class="mb-3">{{ questions[selectedQuestionId - 1].explanation.desc }}</p>

                <ul class="list-disc ml-5 text-sm text-gray-600 dark:text-gray-300">
                  <li *ngFor="let item of questions[selectedQuestionId - 1].explanation.choices">
                    {{ item }}
                  </li>
                </ul>
              </div>
        </div>
      </div>
</section>
